{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import{getAccountDetails,getClientApps}from\"../backend/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[user,setUser]=useState({email:\"\",name:\"\",id:null});const[clientApps,setClientApps]=useState([]);const[menuOpen,setMenuOpen]=useState(false);const navigate=useNavigate();const menuRef=useRef(null);useEffect(()=>{getAccountDetails().then(data=>{setUser({email:data.data.email,name:data.data.username,id:data.data.id});}).catch(error=>{console.error(\"Errore nel recupero dei dettagli dell'account:\",error);navigate(\"/account/login\");});},[navigate]);useEffect(()=>{if(user.id){getClientApps().then(apps=>{setClientApps(apps.filter(app=>app.user_id===user.id));}).catch(err=>console.error(\"Errore nel recupero delle app:\",err));}},[user.id]);const handleLogout=()=>{// Cancella tutti i cookie sul dominio .huberway.com\nconst clearCookies=()=>{const cookies=document.cookie.split(\";\");cookies.forEach(cookie=>{const[name]=cookie.split(\"=\");document.cookie=`${name}=; Path=/; Domain=.huberway.com; Expires=Thu, 01 Jan 1970 00:00:00 UTC; Secure; SameSite=Strict`;});};// Esegui la cancellazione dei cookie\nclearCookies();navigate(\"/account/login\");};const toggleMenu=()=>{setMenuOpen(!menuOpen);};const handleClickOutside=event=>{if(menuRef.current&&!menuRef.current.contains(event.target)){setMenuOpen(false);}};useEffect(()=>{document.addEventListener(\"mousedown\",handleClickOutside);return()=>document.removeEventListener(\"mousedown\",handleClickOutside);},[]);const huberwayLinks=[{name:\"HubConnect\",description:\"Centralized management of CRM, marketing, and chat\",url:\"https://app.huberway.com\",icons:[\"https://dev.huberway.com/icon/sales.svg\",\"https://dev.huberway.com/icon/marketing.svg\"// \"https://dev.huberway.com/icon/smartchat.svg\",\n]},{name:\"SmartChat AI\",description:\"Support your customers with AI-powered chatbots\",url:\"#\",icons:[\"https://dev.huberway.com/icon/smartchat.svg\"]},{name:\"ContentFlow\",description:\"Content management, E-Commerce and Web App Development\",url:\"#\",icons:[\"https://dev.huberway.com/icon/content.svg\"]},{name:\"Web Analytics\",description:\"Detailed analysis of traffic and conversions\",url:\"https://analytics.huberway.com\"}];return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.huberway.com/site/logo-dark.svg\",alt:\"Huberway Logo\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-menu\",ref:menuRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[\"Hello, \",user.name]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary-outline exit-button\",onClick:handleLogout,children:/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-sign-out\"})})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"software-list dynamic\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Apps\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-container\",children:huberwayLinks.map(software=>/*#__PURE__*/_jsxs(\"a\",{href:software.url,className:`software-card dynamic-card ${software.url===\"#\"?\"coming-soon\":\"\"}`,onClick:e=>software.url===\"#\"&&e.preventDefault()// Previene il click se in Coming Soon\n,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[software.icons&&software.icons.map((icon,index)=>/*#__PURE__*/_jsx(\"img\",{src:icon,alt:\"\",style:{height:\"30px\",marginRight:\"5px\"}},index)),software.name]}),/*#__PURE__*/_jsx(\"p\",{children:software.description})]}),software.url===\"#\"&&/*#__PURE__*/_jsx(\"span\",{className:\"coming-soon-badge\",children:\"Coming Soon\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-hover-effect\"})]},software.name))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Apps\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-container\",children:clientApps.map(software=>/*#__PURE__*/_jsxs(\"a\",{href:software.url,className:\"software-card dynamic-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:software.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Access \",software.name,\" tools and services\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-hover-effect\"})]},software.name))})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","getAccountDetails","getClientApps","jsx","_jsx","jsxs","_jsxs","Dashboard","user","setUser","email","name","id","clientApps","setClientApps","menuOpen","setMenuOpen","navigate","menuRef","then","data","username","catch","error","console","apps","filter","app","user_id","err","handleLogout","clearCookies","cookies","document","cookie","split","forEach","toggleMenu","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","huberwayLinks","description","url","icons","className","children","src","alt","ref","onClick","class","map","software","href","e","preventDefault","icon","index","style","height","marginRight"],"sources":["/Users/macbookpro/Documents/Piattaforme-Huberway/Authentication/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { getAccountDetails, getClientApps } from \"../backend/api\";\n\nconst Dashboard = () => {\n  const [user, setUser] = useState({ email: \"\", name: \"\", id: null });\n  const [clientApps, setClientApps] = useState([]);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const navigate = useNavigate();\n  const menuRef = useRef(null);\n\n  useEffect(() => {\n    getAccountDetails()\n      .then((data) => {\n        setUser({\n          email: data.data.email,\n          name: data.data.username,\n          id: data.data.id,\n        });\n      })\n      .catch((error) => {\n        console.error(\"Errore nel recupero dei dettagli dell'account:\", error);\n        navigate(\"/account/login\");\n      });\n  }, [navigate]);\n\n  useEffect(() => {\n    if (user.id) {\n      getClientApps()\n        .then((apps) => {\n          setClientApps(apps.filter((app) => app.user_id === user.id));\n        })\n        .catch((err) => console.error(\"Errore nel recupero delle app:\", err));\n    }\n  }, [user.id]);\n\n  const handleLogout = () => {\n    // Cancella tutti i cookie sul dominio .huberway.com\n    const clearCookies = () => {\n      const cookies = document.cookie.split(\";\");\n\n      cookies.forEach((cookie) => {\n        const [name] = cookie.split(\"=\");\n        document.cookie = `${name}=; Path=/; Domain=.huberway.com; Expires=Thu, 01 Jan 1970 00:00:00 UTC; Secure; SameSite=Strict`;\n      });\n    };\n\n    // Esegui la cancellazione dei cookie\n    clearCookies();\n\n    navigate(\"/account/login\");\n  };\n\n  const toggleMenu = () => {\n    setMenuOpen(!menuOpen);\n  };\n\n  const handleClickOutside = (event) => {\n    if (menuRef.current && !menuRef.current.contains(event.target)) {\n      setMenuOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\n  }, []);\n\n  const huberwayLinks = [\n    {\n      name: \"HubConnect\",\n      description: \"Centralized management of CRM, marketing, and chat\",\n      url: \"https://app.huberway.com\",\n      icons: [\n        \"https://dev.huberway.com/icon/sales.svg\",\n        \"https://dev.huberway.com/icon/marketing.svg\",\n        // \"https://dev.huberway.com/icon/smartchat.svg\",\n      ],\n    },\n    {\n      name: \"SmartChat AI\",\n      description: \"Support your customers with AI-powered chatbots\",\n      url: \"#\",\n      icons: [\"https://dev.huberway.com/icon/smartchat.svg\"],\n    },\n    {\n      name: \"ContentFlow\",\n      description: \"Content management, E-Commerce and Web App Development\",\n      url: \"#\",\n      icons: [\"https://dev.huberway.com/icon/content.svg\"],\n    },\n    {\n      name: \"Web Analytics\",\n      description: \"Detailed analysis of traffic and conversions\",\n      url: \"https://analytics.huberway.com\",\n    },\n  ];\n\n  return (\n    <div className=\"dashboard-container\">\n      <header className=\"header\">\n        <img\n          src=\"https://cdn.huberway.com/site/logo-dark.svg\"\n          alt=\"Huberway Logo\"\n          className=\"logo\"\n        />\n        <div className=\"user-menu\" ref={menuRef}>\n          <div className=\"user-info\">\n            Hello, {user.name}\n          </div>\n          <button className=\"btn btn-primary-outline exit-button\" onClick={handleLogout}>\n            <i className=\"fal fa-sign-out\"></i>\n          </button>\n        </div>\n      </header>\n      <main className=\"software-list dynamic\">\n        <section>\n          <h2>Apps</h2>\n          <div class=\"grid-container\">\n            {huberwayLinks.map((software) => (\n              <a\n                key={software.name}\n                href={software.url}\n                className={`software-card dynamic-card ${\n                  software.url === \"#\" ? \"coming-soon\" : \"\"\n                }`}\n                onClick={(e) => software.url === \"#\" && e.preventDefault()} // Previene il click se in Coming Soon\n              >\n                <div className=\"card-content\">\n                  <h3>\n                    {software.icons &&\n                      software.icons.map((icon, index) => (\n                        <img\n                          key={index}\n                          src={icon}\n                          alt=\"\"\n                          style={{ height: \"30px\", marginRight: \"5px\" }}\n                        />\n                      ))}\n                    {software.name}\n                  </h3>\n                  <p>{software.description}</p>\n                </div>\n                {software.url === \"#\" && (\n                  <span className=\"coming-soon-badge\">Coming Soon</span>\n                )}\n                <div className=\"card-hover-effect\"></div>\n              </a>\n            ))}\n          </div>\n        </section>\n        <section>\n          <h2>My Apps</h2>\n          <div class=\"grid-container\">\n            {clientApps.map((software) => (\n              <a\n                key={software.name}\n                href={software.url}\n                className=\"software-card dynamic-card\"\n              >\n                <div className=\"card-content\">\n                  <h3>{software.name}</h3>\n                  <p>Access {software.name} tools and services</p>\n                </div>\n                <div className=\"card-hover-effect\"></div>\n              </a>\n            ))}\n          </div>\n        </section>\n      </main>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}