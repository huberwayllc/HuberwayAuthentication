{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import{useNavigate}from'react-router-dom';import{getAccountDetails,getClientApps}from'../backend/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[user,setUser]=useState({email:'',name:'',id:null});const[clientApps,setClientApps]=useState([]);const[menuOpen,setMenuOpen]=useState(false);const navigate=useNavigate();const menuRef=useRef(null);useEffect(()=>{getAccountDetails().then(data=>{setUser({email:data.data.email,name:data.data.username,id:data.data.id});}).catch(error=>{console.error('Errore nel recupero dei dettagli dell\\'account:',error);navigate('/account/login');});},[navigate]);useEffect(()=>{if(user.id){getClientApps().then(apps=>{setClientApps(apps.filter(app=>app.user_id===user.id));}).catch(err=>console.error('Errore nel recupero delle app:',err));}},[user.id]);const handleLogout=()=>{// Cancella tutti i cookie sul dominio .huberway.com\nconst clearCookies=()=>{const cookies=document.cookie.split(';');cookies.forEach(cookie=>{const[name]=cookie.split('=');document.cookie=`${name}=; Path=/; Domain=.huberway.com; Expires=Thu, 01 Jan 1970 00:00:00 UTC; Secure; SameSite=Strict`;});};// Esegui la cancellazione dei cookie\nclearCookies();navigate('/account/login');};const toggleMenu=()=>{setMenuOpen(!menuOpen);};const handleClickOutside=event=>{if(menuRef.current&&!menuRef.current.contains(event.target)){setMenuOpen(false);}};useEffect(()=>{document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const huberwayLinks=[{name:'HubConnect',url:'https://app.huberway.com',icons:[\"https://dev.huberway.com/icon/sales.svg\",\"https://dev.huberway.com/icon/marketing.svg\",\"https://dev.huberway.com/icon/smartchat.svg\"]},{name:'Web Analytics',url:'https://analytics.huberway.com'}];return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.huberway.com/site/logo-dark.svg\",alt:\"Huberway Logo\",className:\"logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-menu\",ref:menuRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",onClick:toggleMenu,children:[\"Hello, \",user.name,\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-chevron-down\"})]}),menuOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu show\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{onClick:()=>navigate('/settings'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-cog\"}),\" Settings\"]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>navigate('/billing'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-credit-card\"}),\" Billing\"]}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr-dash\"}),/*#__PURE__*/_jsxs(\"li\",{onClick:handleLogout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fal fa-sign-out\"}),\" Logout\"]})]})})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"software-list dynamic\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Apps\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-container\",children:huberwayLinks.map(software=>/*#__PURE__*/_jsxs(\"a\",{href:software.url,className:\"software-card dynamic-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[software.icons&&software.icons.map((icon,index)=>/*#__PURE__*/_jsx(\"img\",{src:icon,alt:\"\",style:{height:\"30px\",marginRight:\"5px\"}},index)),software.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Access \",software.name,\" tools and services\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-hover-effect\"})]},software.name))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Apps\"}),/*#__PURE__*/_jsx(\"div\",{class:\"grid-container\",children:clientApps.map(software=>/*#__PURE__*/_jsxs(\"a\",{href:software.url,className:\"software-card dynamic-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:software.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Access \",software.name,\" tools and services\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-hover-effect\"})]},software.name))})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","getAccountDetails","getClientApps","jsx","_jsx","jsxs","_jsxs","Dashboard","user","setUser","email","name","id","clientApps","setClientApps","menuOpen","setMenuOpen","navigate","menuRef","then","data","username","catch","error","console","apps","filter","app","user_id","err","handleLogout","clearCookies","cookies","document","cookie","split","forEach","toggleMenu","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","huberwayLinks","url","icons","className","children","src","alt","ref","onClick","class","map","software","href","icon","index","style","height","marginRight"],"sources":["/Users/macbookpro/Documents/Piattaforme-Huberway/Authentication/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getAccountDetails, getClientApps } from '../backend/api';\n\nconst Dashboard = () => {\n    const [user, setUser] = useState({ email: '', name: '', id: null });\n    const [clientApps, setClientApps] = useState([]);\n    const [menuOpen, setMenuOpen] = useState(false);\n    const navigate = useNavigate();\n    const menuRef = useRef(null);\n\n    useEffect(() => {\n        getAccountDetails()\n            .then(data => {\n                setUser({ email: data.data.email, name: data.data.username, id: data.data.id });\n            })\n            .catch(error => {\n                console.error('Errore nel recupero dei dettagli dell\\'account:', error);\n                navigate('/account/login');\n            });\n    }, [navigate]);\n\n    useEffect(() => {\n        if (user.id) {\n            getClientApps()\n                .then(apps => {\n                    setClientApps(apps.filter(app => app.user_id === user.id));\n                })\n                .catch(err => console.error('Errore nel recupero delle app:', err));\n        }\n    }, [user.id]);\n\n    const handleLogout = () => {// Cancella tutti i cookie sul dominio .huberway.com\n        const clearCookies = () => {\n            const cookies = document.cookie.split(';');\n\n            cookies.forEach((cookie) => {\n                const [name] = cookie.split('=');\n                document.cookie = `${name}=; Path=/; Domain=.huberway.com; Expires=Thu, 01 Jan 1970 00:00:00 UTC; Secure; SameSite=Strict`;\n            });\n        };\n\n        // Esegui la cancellazione dei cookie\n        clearCookies();\n\n        navigate('/account/login');\n    };\n\n    const toggleMenu = () => {\n        setMenuOpen(!menuOpen);\n    };\n\n    const handleClickOutside = (event) => {\n        if (menuRef.current && !menuRef.current.contains(event.target)) {\n            setMenuOpen(false);\n        }\n    };\n\n    useEffect(() => {\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    const huberwayLinks = [\n        {\n            name: 'HubConnect',\n            url: 'https://app.huberway.com',\n            icons: [\n                \"https://dev.huberway.com/icon/sales.svg\",\n                \"https://dev.huberway.com/icon/marketing.svg\",\n                \"https://dev.huberway.com/icon/smartchat.svg\"\n            ]\n        },\n        {\n            name: 'Web Analytics',\n            url: 'https://analytics.huberway.com'\n        }\n    ];\n\n    return (\n        <div className=\"dashboard-container\">\n            <header className=\"header\">\n                <img src=\"https://cdn.huberway.com/site/logo-dark.svg\" alt=\"Huberway Logo\" className=\"logo\" />\n                <div className=\"user-menu\" ref={menuRef}>\n                    <div className=\"user-info\" onClick={toggleMenu}>\n                        Hello, {user.name} <i className='fal fa-chevron-down'></i>\n                    </div>\n                    {menuOpen && (\n                        <div className=\"dropdown-menu show\">\n                            <ul>\n                                <li onClick={() => navigate('/settings')}><i className='fal fa-cog'></i> Settings</li>\n                                <li onClick={() => navigate('/billing')}><i className='fal fa-credit-card'></i> Billing</li>\n                                <hr className='hr-dash'></hr>\n                                <li onClick={handleLogout}><i className='fal fa-sign-out'></i> Logout</li>\n                            </ul>\n                        </div>\n                    )}\n                </div>\n            </header>\n            <main className=\"software-list dynamic\">\n                <section>\n                    <h2>Apps</h2>\n                    <div class=\"grid-container\">\n                        {huberwayLinks.map((software) => (\n                            <a key={software.name} href={software.url} className=\"software-card dynamic-card\">\n                                <div className=\"card-content\">\n                                    <h3>\n                                        {/* Se l'elemento ha icone, le mostriamo prima del nome */}\n                                        {software.icons && software.icons.map((icon, index) => (\n                                            <img key={index} src={icon} alt=\"\" style={{ height: \"30px\", marginRight: \"5px\" }} />\n                                        ))}\n                                        {software.name}\n                                    </h3>\n                                    <p>Access {software.name} tools and services</p>\n                                </div>\n                                <div className=\"card-hover-effect\"></div>\n                            </a>\n                        ))}\n                    </div>\n                </section>\n                <section>\n                    <h2>My Apps</h2>\n                    <div class=\"grid-container\">\n                        {clientApps.map((software) => (\n                            <a key={software.name} href={software.url} className=\"software-card dynamic-card\">\n                                <div className=\"card-content\">\n                                    <h3>{software.name}</h3>\n                                    <p>Access {software.name} tools and services</p>\n                                </div>\n                                <div className=\"card-hover-effect\"></div>\n                            </a>\n                        ))}\n                    </div>\n                </section>\n            </main>\n        </div>\n    );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}